<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Admin ‚Äî Products Gallery</title>
<style>
:root {
  --bg: #faf9f7;
  --fg: #111;
  --accent: #6b3b2f;
  --radius: 12px;
  --padding: 1rem;
}
* { margin:0; padding:0; box-sizing:border-box; }
body { font-family: "Segoe UI", Arial, sans-serif; background: var(--bg); min-height:100vh; display:flex; flex-direction:column; }
header { background: linear-gradient(90deg,#000,var(--accent)); color:#fff; padding:1.5rem; text-align:center; font-size:1.3rem; position:relative; }
.exit-btn {
  position: absolute;
  left: 1rem;
  top: 50%;
  transform: translateY(-50%);
  background:#fff;
  color:var(--accent);
  border:none;
  padding:6px 12px;
  border-radius:6px;
  cursor:pointer;
  font-weight:600;
}
main { flex:1; max-width:1000px; margin:2rem auto; background:#fff; padding:2rem; border-radius:var(--radius); box-shadow:0 4px 12px rgba(0,0,0,0.1); display:flex; flex-direction:column; gap:2rem; }

/* Form */
form { display:flex; flex-direction:column; gap:12px; background:#f8f6f4; padding:1rem; border-radius:var(--radius); }
input, select { padding:10px; border-radius:6px; border:1px solid #ccc; font-size:1rem; width:100%; }
button { padding:12px; border:none; border-radius:6px; background:var(--accent); color:#fff; cursor:pointer; font-size:1rem; }
button:hover { background:#81483a; }

/* Image previews */
#previewContainer { display:flex; gap:8px; flex-wrap:wrap; margin-top:10px; }
#previewContainer .preview-image { position:relative; }
#previewContainer img { width:80px; height:80px; object-fit:cover; border-radius:6px; border:1px solid #ccc; }
#previewContainer .remove-img { position:absolute; top:-6px; right:-6px; background:#dc3545; color:#fff; border-radius:50%; width:20px; height:20px; font-size:12px; text-align:center; line-height:20px; cursor:pointer; }

/* Products List */
.products-list { display:grid; grid-template-columns:repeat(auto-fill,minmax(220px,1fr)); gap:1rem; }
.product-card { background:#fff; border:1px solid #ddd; border-radius:var(--radius); padding:0.8rem; display:flex; flex-direction:column; gap:6px; transition:0.2s; }
.product-card:hover { transform:translateY(-3px); box-shadow:0 4px 10px rgba(0,0,0,0.1); }
.product-card img { width:100%; border-radius:var(--radius); object-fit:cover; height:140px; }
.product-card h3 { font-size:16px; margin-top:4px; }
.product-card p { font-size:14px; margin:2px 0; color:#555; }
.card-actions { display:flex; gap:6px; margin-top:auto; }
.card-actions button { flex:1; }

/* Loader */
#loader { position: fixed; top:0; left:0; width:100%; height:100%; background:#fff; display:flex; justify-content:center; align-items:center; z-index:5000; }
.loader-dots { display:flex; gap:10px; }
.loader-dots div { width:20px; height:20px; background: var(--accent); border-radius:50%; animation: bounce 0.6s infinite alternate; }
.loader-dots div:nth-child(2) { animation-delay:0.2s; }
.loader-dots div:nth-child(3) { animation-delay:0.4s; }
@keyframes bounce { 0%{transform:translateY(0);}50%{transform:translateY(-20px);}100%{transform:translateY(0);} }

/* Responsive */
@media(max-width:768px){ .products-list { grid-template-columns:repeat(auto-fill,minmax(160px,1fr)); } }
@media(max-width:480px){ form { padding:0.8rem; } }
</style>
</head>
<body>

<!-- Loader -->
<div id="loader">
  <div class="loader-dots"><div></div><div></div><div></div></div>
</div>

<header>
  üõ†Ô∏è Admin Products Gallery
  <button class="exit-btn" onclick="window.location.href='index.html'">Exit</button>
</header>

<main>
  <form id="productForm">
    <label>Product Name:</label>
    <input type="text" id="prodName" placeholder="Enter product name" required>

    <label>Price:</label>
    <input type="number" id="prodPrice" placeholder="Enter price" required>

    <label>Category:</label>
    <select id="prodCategory" required>
      <option value="">Select category</option>
      <option value="Men">Men</option>
      <option value="Women">Women</option>
      <option value="Kids">Kids</option>
    </select>

    <button type="button" id="uploadBtn">Choose Images</button>
    <input type="file" id="prodImageFile" accept="image/*" style="display:none;" multiple>
    <div id="previewContainer"></div>

    <button type="submit" id="submitBtn">Add Product</button>
  </form>

  <div class="products-list" id="productsList"></div>
</main>

<script>
// Loader
window.addEventListener('load', ()=>{
  const loader = document.getElementById('loader');
  setTimeout(()=>{ loader.style.opacity=0; setTimeout(()=>loader.style.display='none',500); }, 1000);
});

// Multi-image preview
const uploadBtn = document.getElementById('uploadBtn');
const prodImageFile = document.getElementById('prodImageFile');
const previewContainer = document.getElementById('previewContainer');
let previewImages = [];

uploadBtn.addEventListener('click', ()=>prodImageFile.click());
prodImageFile.addEventListener('change', ()=>{
  previewContainer.innerHTML = '';
  previewImages = [];
  [...prodImageFile.files].forEach((file, i)=>{
    const reader = new FileReader();
    reader.onload = e=>{
      previewImages.push(e.target.result);
      const wrapper = document.createElement('div');
      wrapper.className = 'preview-image';
      wrapper.innerHTML = `<img src="${e.target.result}"><span class="remove-img">&times;</span>`;
      wrapper.querySelector('.remove-img').addEventListener('click', ()=>{
        previewImages.splice(i,1);
        wrapper.remove();
      });
      previewContainer.appendChild(wrapper);
    }
    reader.readAsDataURL(file);
  });
});

// Products Data
let products = JSON.parse(localStorage.getItem('products')) || [];
let editIndex = null;
const productsList = document.getElementById('productsList');

// Render Products
function renderProducts(){
  productsList.innerHTML = '';
  if(products.length === 0){
    productsList.innerHTML = `<p style="text-align:center; color:#555;">No products added yet.</p>`;
    return;
  }
  products.forEach((p,index)=>{
    const card = document.createElement('div');
    card.className = 'product-card';
    card.innerHTML = `
      <img src="${p.images[0]}" alt="Product">
      <h3>${p.name}</h3>
      <p>Price: $${p.price}</p>
      <p>Category: ${p.category}</p>
      <div class="card-actions">
        <button style="background:#007bff;" onclick="editProduct(${index})">Edit</button>
        <button style="background:#dc3545;" onclick="deleteProduct(${index})">Delete</button>
      </div>
    `;
    productsList.appendChild(card);
  });
}

// Add / Update Product
document.getElementById('productForm').addEventListener('submit', e=>{
  e.preventDefault();
  const name = document.getElementById('prodName').value.trim();
  const price = document.getElementById('prodPrice').value;
  const category = document.getElementById('prodCategory').value;
  if(!name || !price || !category || previewImages.length===0){ alert('All fields and at least one image are required'); return; }

  const newProduct = {name, price, category, images:[...previewImages]};
  if(editIndex !== null){
    products[editIndex] = newProduct;
    editIndex = null;
    document.getElementById('submitBtn').textContent = 'Add Product';
  } else {
    products.push(newProduct);
  }

  localStorage.setItem('products', JSON.stringify(products));
  renderProducts();

  // Reset form
  document.getElementById('productForm').reset();
  previewContainer.innerHTML = '';
  previewImages = [];
});

// Edit Product
function editProduct(index){
  const p = products[index];
  document.getElementById('prodName').value = p.name;
  document.getElementById('prodPrice').value = p.price;
  document.getElementById('prodCategory').value = p.category;
  previewImages = [...p.images];
  previewContainer.innerHTML = '';
  previewImages.forEach((src,i)=>{
    const wrapper = document.createElement('div');
    wrapper.className = 'preview-image';
    wrapper.innerHTML = `<img src="${src}"><span class="remove-img">&times;</span>`;
    wrapper.querySelector('.remove-img').addEventListener('click', ()=>{
      previewImages.splice(i,1);
      wrapper.remove();
    });
    previewContainer.appendChild(wrapper);
  });
  editIndex = index;
  document.getElementById('submitBtn').textContent = 'Save Changes';
}

// Delete Product
function deleteProduct(index){
  if(confirm('Delete this product?')){
    products.splice(index,1);
    localStorage.setItem('products', JSON.stringify(products));
    renderProducts();
  }
}

// Initial render
renderProducts();
</script>

</body>
</html>
